<nav class="navbar" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item tr-branding" {{#if user}}href="/dash" {{else}}href="/" {{/if}}>
                <div class="tr-branding">
                    <ion-icon name="dice-outline" size="large"></ion-icon>
                    <span>Tech Roulette</span>
                </div>
            </a>
            <a class="navbar-item live-banner" href="/stage">
                {{#if liveEvent}}
                    <span class="blinker">‚óè</span> Now Live: {{liveEvent}}
                {{/if}}
            </a>
            <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
            </a>
        </div>
        <div class="navbar-menu">
            <div class="navbar-start">
                <!-- navbar items -->
            </div>
            <div class="navbar-end">
                {{#unless hide_auth}}
                    {{#if user }}
                        {{#notEq user.state "onboarding"}}
                            <div class="navbar-item has-dropdown is-hoverable">
                                {{!-- <a class="navbar-link" href="/account"> --}}
                                <a class="navbar-link" href="/account">
                                    @{{../user.display_name}}
                                </a>
                                <div class="navbar-dropdown">
                                    <a class="navbar-item" href="/account/edit">
                                        <ion-icon name="create-outline"></ion-icon>
                                        <span>Edit Profile</span>
                                    </a>
                                    <a class="navbar-item" href="/account/redeem">
                                        <ion-icon name="barcode-outline"></ion-icon>
                                        <span>Redeem Badge</span>
                                    </a>
                                    <a class="navbar-item" href="/account/edit">
                                        <ion-icon name="logo-discord"></ion-icon>
                                        <span>Discord Integration</span>
                                    </a>
                                    <a class="navbar-item" href="/account/invite">
                                    <ion-icon name="people-outline"></ion-icon>
                                        <span>Invite Friends</span>
                                    </a>
                                    {{#if ../user.admin}}
                                        <a class="navbar-item admin" href="/admin">
                                            <ion-icon name="hardware-chip-outline"></ion-icon>
                                            <span>Admin Panel</span>
                                        </a>
                                    {{/if}}
                                    <a class="navbar-item" href="/auth/logout">
                                        <ion-icon name="log-out-outline"></ion-icon>
                                        <span>Log Out</span>
                                    </a>
                                </div>
                            </div>
                    {{else}}
                        <a class="navbar-item" href="/auth/logout">
                            Log Out
                        </a>
                        {{/notEq}}
                    {{else}}
                        <a class="button" href="/login">
                            Log In
                        </a>
                    {{/if}}
                {{/unless}}
            </div>
        </div>
    </div>
</nav>
<script nonce="{{@root/nonce}}">
    const burger = document.querySelector('.navbar-burger')
    const menu = document.querySelector('.navbar-menu')

    burger.addEventListener('click', () => {
        burger.classList.toggle('is-active')
        menu.classList.toggle('is-active')
    })
</script>
